{% extends '/layout.html' %}

{% block page_title %}
    Home
{% endblock %}

{% block page_contents %}
    <h1 class="text-center">Books</h1>
    <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
        <div class="btn-group">
          <button type="button" class="btn btn-warning dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            Sort by: {{ request.args.get('sort').title() if request.args.get('sort') else '' }}
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item {{ 'active' if 'author' in request.args.get('sort', []) else '' }}" href="{{ url_for('home', sort='author')}}">Author</a></li>
            <li><a class="dropdown-item {{ 'active' if 'title' in request.args.get('sort', []) else '' }}" href="{{ url_for('home', sort='title')}}">Title</a></li>
            <li><a class="dropdown-item {{ 'active' if 'year' in request.args.get('sort', []) else '' }}" href="{{ url_for('home', sort='year')}}">Year</a></li>
          </ul>
        </div>
        <form action="/" method="get">
            <div class="input-group">
                  <input type="text" class="form-control" name="search" id="search" placeholder="Search title" aria-label="Search title" aria-describedby="basic-addon2">
                  <div class="input-group-append">
                    <input class="btn btn-warning" type="submit" value="Search">
                  </div>
            </div>
        </form>
    </div>
    {% for book in books %}
        <ul class="list-group my-2">
            <li class="list-group-item list-group-item-info mb-2">
                <small>{{ book.author.name }} ({{ book.publication_year }})</small>
                <h3>{{ book.title }}</h3>
                <form action="/book/{{book.id}}/delete" method="post">
                    <button type="submit" class="btn btn-sm btn-danger mt-2" onclick="return confirm('Are you sure to delete this book?')">Delete Book</button>
                </form>
            </li>
        </ul>
    {% endfor %}
{% endblock %}

