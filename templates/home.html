{% extends '/layout.html' %}

{% block page_title %}
    Home
{% endblock %}

{% block page_contents %}
    <main class="container">
        <h1 class="text-center">Books</h1>
        <div class="btn-group">
          <button type="button" class="btn btn-warning dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
            Sort by: {{ request.args.get('sort').title() if request.args.get('sort') else '' }}
          </button>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item {{ 'active' if request.args and 'author' in request.args.get('sort') else '' }}" href="{{ url_for('home', sort='author')}}">Author</a></li>
            <li><a class="dropdown-item {{ 'active' if request.args and 'title' in request.args.get('sort') else '' }}" href="{{ url_for('home', sort='title')}}">Title</a></li>
            <li><a class="dropdown-item {{ 'active' if request.args and 'year' in request.args.get('sort') else '' }}" href="{{ url_for('home', sort='year')}}">Year</a></li>
          </ul>
        </div>
        {% for book in books %}
            <ul class="list-group my-2">
                <li class="list-group-item list-group-item-info mb-2">
                    <small>{{ book.author.name }} ({{ book.publication_year }})</small>
                    <h3>{{ book.title }}</h3>
                </li>
            </ul>
        {% endfor %}
    </main>
{% endblock %}

